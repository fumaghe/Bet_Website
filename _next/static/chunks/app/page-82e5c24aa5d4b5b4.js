(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{630:function(e,a,t){Promise.resolve().then(t.bind(t,8569))},8569:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return em}});var s=t(7437),i=t(2265),r=t(46),l=t(7477),n=t(6110),o=t(3023),c=t(8851),d=t(9311),m=t(1812),u=t.n(m),x=t(7817),h=t(2211);function g(e){let{onMatchSelect:a}=e,[t,r]=(0,i.useState)([]),[l,o]=(0,i.useState)({});return(0,i.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/data/matches_season.csv"),a=await e.text(),t=u().parse(a,{header:!0,skipEmptyLines:!0}),s=t.data.map(e=>({id:"".concat(e["Squadra Casa"],"-").concat(e["Squadra Trasferta"],"-").concat(e.Giorno),homeTeam:e["Squadra Casa"],awayTeam:e["Squadra Trasferta"],league:e.Campionato,date:e.Giorno,time:e.Orario,homeScore:void 0,awayScore:void 0})),i=new Date().toISOString().split("T")[0],l=s.filter(e=>e.date===i),n=l.sort((e,a)=>{let t=e.time.split(":").map(Number),s=a.time.split(":").map(Number);return t[0]-s[0]||t[1]-s[1]}),c=n.slice(0,40);r(c);let d={};for(let e of c){if(!d[e.homeTeam]){let a=(0,x.Ds)(e.homeTeam);a&&(d[e.homeTeam]=a)}if(!d[e.awayTeam]){let a=(0,x.Ds)(e.awayTeam);a&&(d[e.awayTeam]=a)}}o(d)}catch(e){console.error("Errore durante il caricamento dei dati delle partite:",e)}};e()},[]),(0,s.jsxs)(c.x,{className:"w-full rounded-lg overflow-x-auto overflow-y-hidden",children:[(0,s.jsx)("div",{className:"flex gap-4 p-2",children:t.map(e=>{let t=l[e.homeTeam],i=l[e.awayTeam],r=h.fw.find(a=>a.name===e.league);return(0,s.jsxs)(n.Zb,{onClick:()=>a(e.homeTeam,e.awayTeam,e.league),className:(0,d.cn)("flex flex-col w-[190px] flex-shrink-0 p-3 transition-all","hover:scale-105 hover:shadow-lg cursor-pointer"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:e.time}),r&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"relative w-4 h-4",children:(0,s.jsx)("img",{src:r.icon,alt:r.name,className:"object-contain"})}),(0,s.jsx)("span",{className:"text-xs font-medium",children:r.name})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"relative w-7 h-7",children:t&&(0,s.jsx)("img",{src:t.logo,alt:t.team,className:"w-full h-full object-cover"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e.homeTeam})]}),"number"==typeof e.homeScore&&(0,s.jsx)("span",{className:"text-lg font-bold",children:e.homeScore})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"relative w-8 h-8",children:i&&(0,s.jsx)("img",{src:i.logo,alt:i.team,className:"w-full h-full object-cover"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:e.awayTeam})]}),"number"==typeof e.awayScore&&(0,s.jsx)("span",{className:"text-lg font-bold",children:e.awayScore})]})]},e.id)})}),(0,s.jsx)(c.B,{orientation:"horizontal"})]})}var p=t(6691),f=t.n(p),j=t(1393),y=t(4218),b=t(1291),v=t(7158);function w(e){let{onHomeTeamSelect:a,onAwayTeamSelect:t,selectedHomeTeam:r,selectedAwayTeam:l,selectedLeague:c,onLeagueChange:d}=e,[m,u]=(0,i.useState)(0),[h,g]=(0,i.useState)([]),[p,w]=(0,i.useState)(0),[A,S]=(0,i.useState)(0),C=[{name:"Serie A",country:"Italia",icon:"/images/leagues/serie_a.png"},{name:"Premier League",country:"Inghilterra",icon:"/images/leagues/premier_league.png"},{name:"La Liga",country:"Spagna",icon:"/images/leagues/la_liga.png"},{name:"Bundesliga",country:"Germania",icon:"/images/leagues/bundesliga.png"},{name:"Ligue 1",country:"Francia",icon:"/images/leagues/ligue_1.png"},{name:"Champions League",country:"Europa",icon:"/images/leagues/champions_league.png"}];return(0,i.useEffect)(()=>{if(c){let e=C.findIndex(e=>e.name===c);-1!==e&&u(e)}},[c]),(0,i.useEffect)(()=>{let e=async()=>{let e=c||C[0].name,a=await (0,x.eg)(e),t=a.map(e=>({id:e.team.toLowerCase().replace(/\s+/g,"_"),name:e.team,logo:"/images/teams/".concat(e.team.toLowerCase().replace(/\s+/g,"_"),".png"),rating:Math.min(5,e.points/10)}));g(t),c||d(e)};e()},[c]),(0,i.useEffect)(()=>{if(r){let e=h.findIndex(e=>e.name===r);-1!==e&&w(e)}},[r,h]),(0,i.useEffect)(()=>{if(l){let e=h.findIndex(e=>e.name===l);-1!==e&&S(e)}},[l,h]),(0,s.jsx)(n.Zb,{className:"max-w-[900px] mx-auto p-6 space-y-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 items-center gap-6",children:[(0,s.jsx)(N,{teams:h,currentIndex:p,onIndexChange:w,onSelect:()=>{var e;let t=null===(e=h[p])||void 0===e?void 0:e.name;t&&a(t)},selectedTeam:r,label:"Squadra Casa"}),(0,s.jsx)("div",{className:"flex flex-col items-center text-center",children:(0,s.jsxs)("div",{className:"relative flex items-center space-x-2",children:[(0,s.jsx)(o.z,{variant:"ghost",size:"icon",onClick:()=>{let e=(m-1+C.length)%C.length,a=C[e].name;u(e),d(a)},children:(0,s.jsx)(b.Z,{className:"h-5 w-5"})}),(0,s.jsx)(j.M,{mode:"wait",children:(0,s.jsxs)(y.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"relative w-20 h-20",children:(0,s.jsx)(f(),{src:C[m].icon,alt:C[m].name,fill:!0,className:"object-contain",priority:!0})}),(0,s.jsx)("h3",{className:"text-sm font-bold mt-2",children:C[m].name}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:C[m].country})]},C[m].name)}),(0,s.jsx)(o.z,{variant:"ghost",size:"icon",onClick:()=>{let e=(m+1)%C.length,a=C[e].name;u(e),d(a)},children:(0,s.jsx)(v.Z,{className:"h-5 w-5"})})]})}),(0,s.jsx)(N,{teams:h,currentIndex:A,onIndexChange:S,onSelect:()=>{var e;let a=null===(e=h[A])||void 0===e?void 0:e.name;a&&t(a)},selectedTeam:l,label:"Squadra Trasferta"})]})})}function N(e){var a;let{teams:t,currentIndex:i,onIndexChange:r,onSelect:l,selectedTeam:n,label:c}=e,m=t[i];return m?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("h4",{className:"text-xs font-medium text-muted-foreground mb-3",children:c}),(0,s.jsxs)("div",{className:"relative bg-card rounded-md p-4",children:[(0,s.jsx)(o.z,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2",onClick:()=>{let e=(i-1+t.length)%t.length;r(e)},children:(0,s.jsx)(b.Z,{className:"h-5 w-5"})}),(0,s.jsx)(j.M,{mode:"wait",children:(0,s.jsxs)(y.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:(0,d.cn)("w-20 h-20 rounded-full flex items-center justify-center transition-all",n===m.name&&"ring-2 ring-primary"),children:(0,s.jsx)(f(),{src:m.logo,alt:m.name,width:55,height:55,className:"object-contain"})}),(0,s.jsxs)("div",{className:"text-center mt-2",children:[(0,s.jsx)("h4",{className:"text-sm font-bold mb-1",children:m.name}),(0,s.jsx)("div",{className:"flex justify-center mb-2",children:(a=m.rating,Array.from({length:5}).map((e,t)=>(0,s.jsx)("span",{className:(0,d.cn)("text-lg",t<Math.floor(a)?"text-primary":"text-muted-foreground/30"),children:"★"},t)))})]}),(0,s.jsx)(o.z,{className:(0,d.cn)("w-full text-xs mt-2 transition-all",n===m.name?"bg-primary/20 hover:bg-primary/30 text-primary":"bg-primary hover:bg-primary/90"),onClick:l,children:n===m.name?"Selezionato":"Seleziona Squadra"})]},m.id)}),(0,s.jsx)(o.z,{variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>{let e=(i+1)%t.length;r(e)},children:(0,s.jsx)(v.Z,{className:"h-5 w-5"})})]})]}):null}var A=t(6324),S=t(4522);let C=S.fC,G=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(S.aV,{ref:a,className:(0,d.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...i})});G.displayName=S.aV.displayName;let F=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(S.xz,{ref:a,className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...i})});F.displayName=S.xz.displayName;let I=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(S.VY,{ref:a,className:(0,d.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...i})});I.displayName=S.VY.displayName;var T=t(2553),M=t(4746);let k=[],P=[];async function L(){try{let e=await fetch("/data/players/league_players.csv"),a=await fetch("/data/players/champions_league_players.csv");if(!e.ok||!a.ok)throw Error("Errore nel caricamento dei file CSV");let t=await e.text(),s=await a.text(),i=await (0,M.b)(t),r=await (0,M.b)(s);k=E(i,"league"),P=E(r,"champions"),console.log("Dati dei giocatori caricati correttamente."),console.log("League Players:",k),console.log("Champions League Players:",P)}catch(e){console.error("Error loading player stats:",e)}}function E(e,a){return e.map(e=>({pos:parseInt(e.Pos)||0,name:e.Giocatore||"Sconosciuto",nationality:e.Nazione||"Sconosciuta",position:e.Ruolo||"Sconosciuto",team:"string"==typeof e.Squadra&&""!==e.Squadra.trim()?e.Squadra:"Sconosciuta",league:"league"===a?e.Competizione||"Serie A":"Champions League",age:parseInt(e.Età)||0,matches:parseInt(e.PG)||0,starts:parseInt(e.Tit)||0,minutes:parseInt(e.Min)||0,goals:parseInt(e.Reti)||0,assists:parseInt(e.Assist)||0,yellowCards:parseInt(e["Amm."])||0,redCards:parseInt(e["Esp."])||0,xG:parseFloat(e.xG)||0,shots:parseInt(e["Tiri totali"])||0,shotsOnTarget:parseInt(e["Tiri in porta"])||0,foulsCommitted:parseInt(e["Falli commessi"])||0,foulsDrawn:parseInt(e["Falli subiti"])||0,offsides:parseInt(e.Fuorigioco)||0,progressiveCarries:parseInt(e.PrgC)||0,progressivePasses:parseInt(e.PrgP)||0}))}function R(e,a,t){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=function(e,a){let t="Champions League"===a?P:k;return t.filter(a=>"string"==typeof a.team&&a.team.toLowerCase()===e.toLowerCase())}(e,a);console.log("Filtrando i giocatori per ".concat(e," nella lega ").concat(a," per la statistica ").concat(t));let r="Champions League"===a?3:5,l=i.filter(e=>e.matches>=r&&void 0!==e[t]&&null!==e[t]);console.log("Giocatori filtrati per ".concat(t,":"),l);let n=l.sort((e,a)=>{let s=e[t],i=a[t];return"number"==typeof s&&"number"==typeof i?i-s:0}),o=n.slice(0,s);return console.log("Top ".concat(s," giocatori per ").concat(t,":"),o),o}function z(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,s="Champions League"===e?P:k.filter(a=>a.league===e);return[...s].sort((e,t)=>"goals"===a?t.goals-e.goals:"assists"===a?t.assists-e.assists:t.goals+t.assists-(e.goals+e.assists)).slice(0,t)}function _(e){let{league:a}=e,[t,r]=(0,i.useState)("goals"),l=z(a,"goals"),o=z(a,"assists"),c=z(a,"goalsAndAssists");return(0,s.jsxs)(n.Zb,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Classifiche Giocatori"}),(0,s.jsxs)(C,{value:t,onValueChange:r,children:[(0,s.jsxs)(G,{className:"grid w-full grid-cols-3 mb-6",children:[(0,s.jsx)(F,{value:"goals",className:"data-[state=active]:bg-green-500 data-[state=active]:text-white",children:"Gol"}),(0,s.jsx)(F,{value:"assists",className:"data-[state=active]:bg-green-500 data-[state=active]:text-white",children:"Assist"}),(0,s.jsx)(F,{value:"contributions",className:"data-[state=active]:bg-green-500 data-[state=active]:text-white",children:"Gol+Ass"})]}),(0,s.jsx)(I,{value:"goals",children:(0,s.jsx)(q,{players:l,statKey:"goals",statLabel:"Gol"})}),(0,s.jsx)(I,{value:"assists",children:(0,s.jsx)(q,{players:o,statKey:"assists",statLabel:"Assist"})}),(0,s.jsx)(I,{value:"contributions",children:(0,s.jsx)(q,{players:c,statKey:"goalsAndAssists",statLabel:"G+A"})})]})]})}function q(e){let{players:a,statKey:t,statLabel:i}=e,r=e=>{let a=e.split(" ");return a[a.length-1]};return(0,s.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto"},children:(0,s.jsxs)(T.iA,{children:[(0,s.jsx)(T.xD,{children:(0,s.jsxs)(T.SC,{children:[(0,s.jsx)(T.ss,{style:{width:"50px"},children:"Pos"}),(0,s.jsx)(T.ss,{style:{width:"150px"},children:"Giocatore"}),(0,s.jsx)(T.ss,{style:{width:"120px"},children:"Squadra"}),(0,s.jsx)(T.ss,{style:{width:"80px",textAlign:"right"},children:i})]})}),(0,s.jsx)(T.RM,{children:a.map((e,a)=>(0,s.jsxs)(T.SC,{children:[(0,s.jsx)(T.pj,{style:{width:"50px"},children:a+1}),(0,s.jsx)(T.pj,{className:"font-medium",style:{width:"150px"},children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{children:r(e.name)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.position})]})}),(0,s.jsx)(T.pj,{style:{width:"120px"},children:e.team}),(0,s.jsx)(T.pj,{style:{width:"80px",textAlign:"right",fontWeight:"bold"},children:"goalsAndAssists"===t?e.goals+e.assists:e[t]})]},"".concat(e.name,"-").concat(e.team)))})]})})}async function V(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"team";try{let s=a.toLowerCase().replace(/\s+/g,"_"),i=await fetch("/data/standings/".concat(s,".csv")),r=await i.text(),l=await (0,M.b)(r),n=l.find(a=>a.Squadra===e);if(!n)return{goalsFor:0,goalsAgainst:0,xG:0,xAG:0,foulsCommitted:0,foulsSuffered:0,offside:0,yellowCards:0,played:0,perMatchGoalsFor:0,perMatchGoalsAgainst:0,perMatchXG:0,perMatchXAG:0,perMatchFoulsCommitted:0,perMatchFoulsSuffered:0,perMatchOffside:0,perMatchYellowCards:0,leagueAverage:{total:{"Reti Fatte":0,"Reti Subite":0,xG:0,xAG:0,"Falli Comessi":0,"Falli Subiti":0,Fuorigioco:0,Ammonizioni:0},perMatch:{"Reti Fatte":0,"Reti Subite":0,xG:0,xAG:0,"Falli Comessi":0,"Falli Subiti":0,Fuorigioco:0,Ammonizioni:0}}};let o=parseInt(n.Pos,10),c=Math.max(o-3,1),d=o+3;o<=3&&(c=1,d=6);let m=l.length;o>=m-2&&(d=m,c=m-5);let u=l.filter(e=>{let a=parseInt(e.Pos,10);return a>=c&&a<=d}),x="";if("team"===t)x="/data/team_performance.csv";else if("opponent"===t)x="/data/opponent_performance.csv";else throw Error("Data source ".concat(t," is not recognized."));let h=await fetch(x),g=await h.text(),p=await (0,M.b)(g),f=p.find(a=>a.Squadra===e);if(!f)return{goalsFor:0,goalsAgainst:0,xG:0,xAG:0,foulsCommitted:0,foulsSuffered:0,offside:0,yellowCards:0,played:0,perMatchGoalsFor:0,perMatchGoalsAgainst:0,perMatchXG:0,perMatchXAG:0,perMatchFoulsCommitted:0,perMatchFoulsSuffered:0,perMatchOffside:0,perMatchYellowCards:0,leagueAverage:{total:{"Reti Fatte":0,"Reti Subite":0,xG:0,xAG:0,"Falli Comessi":0,"Falli Subiti":0,Fuorigioco:0,Ammonizioni:0},perMatch:{"Reti Fatte":0,"Reti Subite":0,xG:0,xAG:0,"Falli Comessi":0,"Falli Subiti":0,Fuorigioco:0,Ammonizioni:0}}};let j=parseInt(n.PG,10),y="team"===t?parseInt(n.Rf,10):parseInt(n.Rs,10),b="team"===t?parseInt(n.Rs,10):parseInt(n.Rf,10),v={goalsFor:y,goalsAgainst:b,xG:parseFloat(f.xG),xAG:parseFloat(f.xAG),foulsCommitted:parseInt(f["Falli commessi"],10),foulsSuffered:parseInt(f["Falli subiti"],10),offside:parseInt(f.Fuorigioco,10),yellowCards:parseInt(f["Amm."],10)},w=u.length,N=u.reduce((e,a)=>e+("team"===t?parseInt(a.Rf,10):parseInt(a.Rs,10)),0)/w,A=u.reduce((e,a)=>e+("team"===t?parseInt(a.Rs,10):parseInt(a.Rf,10)),0)/w,S=p.filter(e=>u.some(a=>a.Squadra===e.Squadra)),C=S.reduce((e,a)=>e+parseFloat(a.xG),0)/w,G=S.reduce((e,a)=>e+parseFloat(a.xAG),0)/w,F=S.reduce((e,a)=>e+parseInt(a["Falli commessi"],10),0)/w,I=S.reduce((e,a)=>e+parseInt(a["Falli subiti"],10),0)/w,T=S.reduce((e,a)=>e+parseInt(a.Fuorigioco,10),0)/w,k=S.reduce((e,a)=>e+parseInt(a["Amm."],10),0)/w,P=u.reduce((e,a)=>e+("team"===t?parseInt(a.Rf,10)/parseInt(a.PG,10):parseInt(a.Rs,10)/parseInt(a.PG,10)),0)/w,L=u.reduce((e,a)=>e+("team"===t?parseInt(a.Rs,10)/parseInt(a.PG,10):parseInt(a.Rf,10)/parseInt(a.PG,10)),0)/w,E=S.reduce((e,a)=>e+parseFloat(a.xG)/parseInt(a.PG,10),0)/w,R=S.reduce((e,a)=>e+parseFloat(a.xAG)/parseInt(a.PG,10),0)/w,z=S.reduce((e,a)=>e+parseInt(a["Falli commessi"],10)/parseInt(a.PG,10),0)/w,_=S.reduce((e,a)=>e+parseInt(a["Falli subiti"],10)/parseInt(a.PG,10),0)/w,q=S.reduce((e,a)=>e+parseInt(a.Fuorigioco,10)/parseInt(a.PG,10),0)/w,V=S.reduce((e,a)=>e+parseInt(a["Amm."],10)/parseInt(a.PG,10),0)/w;return{...v,played:j,perMatchGoalsFor:v.goalsFor/j,perMatchGoalsAgainst:v.goalsAgainst/j,perMatchXG:v.xG/j,perMatchXAG:v.xAG/j,perMatchFoulsCommitted:v.foulsCommitted/j,perMatchFoulsSuffered:v.foulsSuffered/j,perMatchOffside:v.offside/j,perMatchYellowCards:v.yellowCards/j,leagueAverage:{total:{"Reti Fatte":N,"Reti Subite":A,xG:C,xAG:G,"Falli Comessi":F,"Falli Subiti":I,Fuorigioco:T,Ammonizioni:k},perMatch:{"Reti Fatte":P,"Reti Subite":L,xG:E,xAG:R,"Falli Comessi":z,"Falli Subiti":_,Fuorigioco:q,Ammonizioni:V}}}}catch(e){throw console.error("Errore durante il calcolo delle statistiche:",e),e}}function D(e){let{selectedLeague:a="Serie A",selectedHomeTeam:t,selectedAwayTeam:r}=e,[l,o]=(0,i.useState)(null),[c,d]=(0,i.useState)(null),[m,u]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let e=async()=>{await L(),u(!1)};e()},[]),(0,i.useEffect)(()=>{let e=async()=>{if(t){let e=await V(t,a,"team");o(e)}if(r){let e=await V(r,a,"opponent");d(e)}};e()},[t,r,a]),m)?(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,s.jsx)(n.Zb,{className:"overflow-hidden border shadow-md",children:(0,s.jsxs)("div",{className:"p-6 bg-gradient-to-br from-card to-card/50",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Classifica ",a]}),(0,s.jsx)(A.g,{league:a})]})})},a),(0,s.jsx)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,s.jsx)(_,{league:a})})]})}var H=t(9172),O=t(8477),Z=t(5224);function Y(e){let{teamHome:a,teamAway:t,league:r}=e,[l,c]=(0,i.useState)(null),[d,m]=(0,i.useState)(null),[u,x]=(0,i.useState)(!0),[h,g]=(0,i.useState)("total"),[p,f]=(0,i.useState)("teams"),[j,b]=(0,i.useState)("team");if((0,i.useEffect)(()=>{let e=async()=>{x(!0);try{let[e,s]=await Promise.all([V(a,r,j),V(t,r,j)]);c(e),m(s)}catch(e){console.error("Error loading team stats:",e),c(null),m(null)}finally{x(!1)}};e()},[a,t,r,j]),u)return(0,s.jsx)("p",{className:"text-muted-foreground",children:"Caricamento statistiche..."});if(!l||!d)return(0,s.jsx)("p",{className:"text-muted-foreground",children:"Statistiche non disponibili per una o entrambe le squadre."});let v=[{label:"Reti Fatte",icon:(0,s.jsx)(H.QDI,{}),homeValue:l.goalsFor,awayValue:d.goalsFor,homePerMatch:l.perMatchGoalsFor,awayPerMatch:d.perMatchGoalsFor,homeLeagueAverage:l.leagueAverage[h]["Reti Fatte"],awayLeagueAverage:d.leagueAverage[h]["Reti Fatte"],description:"Totale delle reti segnate dalla squadra.",isPositiveStat:!0},{label:"Reti Subite",icon:(0,s.jsx)(H.bri,{}),homeValue:l.goalsAgainst,awayValue:d.goalsAgainst,homePerMatch:l.perMatchGoalsAgainst,awayPerMatch:d.perMatchGoalsAgainst,homeLeagueAverage:l.leagueAverage[h]["Reti Subite"],awayLeagueAverage:d.leagueAverage[h]["Reti Subite"],description:"Totale delle reti subite dalla squadra.",isPositiveStat:!1},{label:"xG",icon:(0,s.jsx)(H.Op,{}),homeValue:l.xG,awayValue:d.xG,homePerMatch:l.perMatchXG,awayPerMatch:d.perMatchXG,homeLeagueAverage:l.leagueAverage[h].xG,awayLeagueAverage:d.leagueAverage[h].xG,description:"Gol attesi in base alla qualit\xe0 dei tiri.",isPositiveStat:!0},{label:"xAG",icon:(0,s.jsx)(H.gJy,{}),homeValue:l.xAG,awayValue:d.xAG,homePerMatch:l.perMatchXAG,awayPerMatch:d.perMatchXAG,homeLeagueAverage:l.leagueAverage[h].xAG,awayLeagueAverage:d.leagueAverage[h].xAG,description:"Gol attesi contro in base ai tiri subiti.",isPositiveStat:!1},{label:"Falli Comessi",icon:(0,s.jsx)(O.d8e,{}),homeValue:l.foulsCommitted,awayValue:d.foulsCommitted,homePerMatch:l.perMatchFoulsCommitted,awayPerMatch:d.perMatchFoulsCommitted,homeLeagueAverage:l.leagueAverage[h]["Falli Comessi"],awayLeagueAverage:d.leagueAverage[h]["Falli Comessi"],description:"Totale dei falli commessi dalla squadra.",isPositiveStat:!1},{label:"Ammonizioni",icon:(0,s.jsx)(O.Hjs,{}),homeValue:l.yellowCards,awayValue:d.yellowCards,homePerMatch:l.perMatchYellowCards,awayPerMatch:d.perMatchYellowCards,homeLeagueAverage:l.leagueAverage[h].Ammonizioni,awayLeagueAverage:d.leagueAverage[h].Ammonizioni,description:"Totale delle ammonizioni ricevute dalla squadra.",isPositiveStat:!1},{label:"Falli Subiti",icon:(0,s.jsx)(H.EaM,{}),homeValue:l.foulsSuffered,awayValue:d.foulsSuffered,homePerMatch:l.perMatchFoulsSuffered,awayPerMatch:d.perMatchFoulsSuffered,homeLeagueAverage:l.leagueAverage[h]["Falli Subiti"],awayLeagueAverage:d.leagueAverage[h]["Falli Subiti"],description:"Totale dei falli subiti dalla squadra.",isPositiveStat:!0},{label:"Fuorigioco",icon:(0,s.jsx)(H.wQ2,{}),homeValue:l.offside,awayValue:d.offside,homePerMatch:l.perMatchOffside,awayPerMatch:d.perMatchOffside,homeLeagueAverage:l.leagueAverage[h].Fuorigioco,awayLeagueAverage:d.leagueAverage[h].Fuorigioco,description:"Totale dei fuorigioco della squadra.",isPositiveStat:!1}];return(0,s.jsx)(Z.zt,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.z,{variant:"total"===h?"default":"outline",onClick:()=>g("total"),children:"Totale"}),(0,s.jsx)(o.z,{variant:"perMatch"===h?"default":"outline",onClick:()=>g("perMatch"),children:"xMatch"})]}),(0,s.jsx)("div",{className:"border-l border-gray-300 h-6 mx-2"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.z,{variant:"teams"===p?"default":"outline",onClick:()=>f("teams"),children:"Confronto"}),(0,s.jsx)(o.z,{variant:"league"===p?"default":"outline",onClick:()=>f("league"),children:"AVGSimilar"})]}),(0,s.jsx)("div",{className:"border-l border-gray-300 h-6 mx-2"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.z,{variant:"team"===j?"default":"outline",onClick:()=>b("team"),children:"Squadra"}),(0,s.jsx)(o.z,{variant:"opponent"===j?"default":"outline",onClick:()=>b("opponent"),children:"Avversari"})]})]}),(0,s.jsx)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(e=>{let{label:i,icon:r,homeValue:l,awayValue:o,homePerMatch:c,awayPerMatch:d,homeLeagueAverage:m,awayLeagueAverage:u,description:x,isPositiveStat:g}=e,f="total"===h?l:c,j="total"===h?o:d;if("league"===p){let e=(e,a,t)=>{let l=g?a>=t:a<=t,o=a+t,c=o?a/o*100:50,d=o?t/o*100:50;return(0,s.jsxs)(n.Zb,{className:"p-4 bg-gradient-to-br from-card to-card/50 hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"text-primary",children:r}),(0,s.jsx)("span",{className:"text-sm font-semibold",children:i})]}),(0,s.jsx)(Z.zt,{children:(0,s.jsxs)(Z.fC,{children:[(0,s.jsx)(Z.xz,{asChild:!0,children:(0,s.jsx)("div",{className:"text-muted-foreground cursor-pointer",children:"ℹ️"})}),(0,s.jsxs)(Z.VY,{side:"top",align:"center",className:"tooltip-content",children:[x,(0,s.jsx)(Z.Eh,{className:"tooltip-arrow"})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg font-bold ".concat(l?"text-primary":"text-muted-foreground"),children:a.toFixed(2)}),(0,s.jsx)("p",{className:"text-xs",children:e})]}),(0,s.jsx)("div",{className:"w-px h-12 bg-muted-foreground"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg font-bold ".concat(l?"text-muted-foreground":"text-primary"),children:t.toFixed(2)}),(0,s.jsx)("p",{className:"text-xs",children:"Media"})]})]}),(0,s.jsxs)("div",{className:"relative mt-4 h-4 bg-muted/20 rounded-full overflow-hidden",children:[(0,s.jsx)(y.E.div,{initial:{width:0},animate:{width:"".concat(c/(c+d)*100,"%")},transition:{duration:1},className:"absolute left-0 top-0 h-full bg-primary"}),(0,s.jsx)(y.E.div,{initial:{width:0},animate:{width:"".concat(d/(c+d)*100,"%")},transition:{duration:1},className:"absolute right-0 top-0 h-full bg-secondary"})]})]},"".concat(i,"-").concat(e))};return(0,s.jsxs)(s.Fragment,{children:[e(a,f,m),e(t,j,u)]})}{let e=g?f>=j:f<=j,l=f+j,o=l?f/l*100:50,c=l?j/l*100:50;return(0,s.jsxs)(n.Zb,{className:"p-4 bg-gradient-to-br from-card to-card/50 hover:shadow-lg transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"text-primary",children:r}),(0,s.jsx)("span",{className:"text-sm font-semibold",children:i})]}),(0,s.jsx)(Z.zt,{children:(0,s.jsxs)(Z.fC,{children:[(0,s.jsx)(Z.xz,{asChild:!0,children:(0,s.jsx)("div",{className:"text-muted-foreground cursor-pointer",children:"ℹ️"})}),(0,s.jsxs)(Z.VY,{side:"top",align:"center",className:"tooltip-content",children:[x,(0,s.jsx)(Z.Eh,{className:"tooltip-arrow"})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg font-bold ".concat(e?"text-primary":"text-muted-foreground"),children:f.toFixed(2)}),(0,s.jsx)("p",{className:"text-xs",children:a})]}),(0,s.jsx)("div",{className:"w-px h-12 bg-muted-foreground"}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg font-bold ".concat(e?"text-muted-foreground":"text-primary"),children:j.toFixed(2)}),(0,s.jsx)("p",{className:"text-xs",children:t})]})]}),(0,s.jsxs)("div",{className:"relative mt-4 h-4 bg-muted/20 rounded-full overflow-hidden",children:[(0,s.jsx)(y.E.div,{initial:{width:0},animate:{width:"".concat(o,"%")},transition:{duration:1},className:"absolute left-0 top-0 h-full bg-primary"}),(0,s.jsx)(y.E.div,{initial:{width:0},animate:{width:"".concat(c,"%")},transition:{duration:1},className:"absolute right-0 top-0 h-full bg-secondary"})]})]},i)}})})]})})}var W=t(609),X=t(1502),B=t(2665);let U=Z.zt,J=Z.fC,K=Z.xz,Q=i.forwardRef((e,a)=>{let{className:t,sideOffset:i=4,...r}=e;return(0,s.jsx)(Z.VY,{ref:a,sideOffset:i,className:(0,d.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})});function $(e){let{type:a,percentage:t,matchCount:r=10,confidence:l="medium"}=e,o=(0,W.c)(0),c=(0,X.H)(o,[0,100],["100%","0%"]);return(0,i.useEffect)(()=>{let e=(0,B.j)(o,t,{duration:1.5,ease:[.32,.72,0,1]});return e.stop},[o,t]),(0,s.jsx)(U,{children:(0,s.jsxs)(J,{children:[(0,s.jsx)(K,{asChild:!0,children:(0,s.jsx)(y.E.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"relative",children:(0,s.jsxs)(n.Zb,{className:"relative p-6 text-center cursor-pointer overflow-hidden border-2 border-transparent hover:border-primary/20 transition-all duration-200",children:[(0,s.jsxs)("div",{className:"relative z-10",children:[(0,s.jsx)("div",{className:"text-4xl font-bold mb-4 bg-gradient-to-br from-primary to-primary/70 bg-clip-text text-transparent",children:a}),(0,s.jsxs)("div",{className:"text-3xl font-bold mb-1",children:[t,"%"]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Basato su ",r," partite"]})]}),(0,s.jsx)(y.E.div,{className:"absolute bottom-0 left-0 w-full ".concat("bg-emerald-400/".concat("high"===l?"70":"medium"===l?"50":"30")),style:{height:"100%",transformOrigin:"bottom",y:c},children:(0,s.jsx)("div",{className:"h-full w-full bg-gradient-to-t from-emerald-500/50 to-transparent"})})]})})}),(0,s.jsxs)(Q,{side:"top",className:"p-4 max-w-[200px]",children:[(0,s.jsxs)("p",{className:"text-sm font-medium mb-2",children:["Probabilit\xe0: ",t,"%"]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(e=>{switch(e){case"high":return"Alta confidenza";case"medium":return"Media confidenza";case"low":return"Bassa confidenza"}})(l),(0,s.jsx)("br",{}),"Analisi basata su ",r," partite precedenti"]})]})]})})}function ee(e){let{players:a,statLabel:t,displayMode:r}=e,l=(0,i.useMemo)(()=>({Reti:"goals",Assist:"assists",xG:"xG","Tiri totali":"shots","Tiri in porta":"shotsOnTarget","Amm.":"yellowCards","Esp.":"redCards","Falli commessi":"foulsCommitted","Falli subiti":"foulsDrawn",PG:"matches",Min:"minutes",Fuorigioco:"offsides",PrgC:"progressiveCarries",PrgP:"progressivePasses"})[t]||"minutes",[t]);return a&&0!==a.length?(0,s.jsxs)(T.iA,{className:"border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[(0,s.jsx)(T.xD,{className:"bg-green-500",children:(0,s.jsxs)(T.SC,{children:[(0,s.jsx)(T.ss,{className:"px-4 py-2 text-white text-sm font-semibold uppercase tracking-wider",children:"Giocatore"}),(0,s.jsx)(T.ss,{className:"px-4 py-2 text-white text-sm font-semibold uppercase tracking-wider text-right",children:"total"===r?t:"".concat(t," x90")})]})}),(0,s.jsx)(T.RM,{children:a.map(e=>{let a="total"===r?e[l]:e.matches>0?(e[l]/e.matches).toFixed(2):"0.00";return(0,s.jsxs)(T.SC,{className:"hover:bg-blu-50 transition-colors duration-300",children:[(0,s.jsx)(T.pj,{className:"px-4 py-3 font-medium text-sm",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.position})]})}),(0,s.jsx)(T.pj,{className:"px-4 py-3 text-sm text-right",children:a})]},e.name)})})]}):(0,s.jsx)("div",{className:"text-muted-foreground",children:"Nessun dato disponibile."})}Q.displayName=Z.VY.displayName;var ea=t(1546),et=t(3402),es=t(9509),ei=t(4627);let er=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)(ei.fC,{className:(0,d.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...i,ref:a,children:(0,s.jsx)(ei.bU,{className:(0,d.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});er.displayName=ei.fC.displayName;let el=[{id:"scoring",label:"Scoring",stats:[{key:"goals",label:"Reti",icon:(0,s.jsx)(H.QDI,{className:"h-4 w-4"})},{key:"assists",label:"Assist",icon:(0,s.jsx)(H.p10,{className:"h-4 w-4"})},{key:"xG",label:"xG",icon:(0,s.jsx)(ea.dsJ,{className:"h-4 w-4"})},{key:"shots",label:"Tiri totali",icon:(0,s.jsx)(ea.o$9,{className:"h-4 w-4"})},{key:"shotsOnTarget",label:"Tiri in porta",icon:(0,s.jsx)(et.qA,{className:"h-4 w-4"})}]},{id:"discipline",label:"Discipline",stats:[{key:"yellowCards",label:"Amm.",icon:(0,s.jsx)(es.AhU,{className:"h-4 w-4 text-yellow-400"})},{key:"redCards",label:"Esp.",icon:(0,s.jsx)(es.AhU,{className:"h-4 w-4 text-red-500"})},{key:"foulsCommitted",label:"Falli commessi",icon:(0,s.jsx)(et.ef6,{className:"h-4 w-4"})},{key:"foulsDrawn",label:"Falli subiti",icon:(0,s.jsx)(H.ULU,{className:"h-4 w-4"})}]},{id:"general",label:"General",stats:[{key:"matches",label:"PG",icon:(0,s.jsx)(et.iNe,{className:"h-4 w-4"})},{key:"minutes",label:"Min",icon:(0,s.jsx)(et.iNe,{className:"h-4 w-4"})},{key:"offsides",label:"Fuorigioco",icon:(0,s.jsx)(et.ef6,{className:"h-4 w-4"})},{key:"progressiveCarries",label:"PrgC",icon:(0,s.jsx)(ea.dsJ,{className:"h-4 w-4"})},{key:"progressivePasses",label:"PrgP",icon:(0,s.jsx)(ea.dsJ,{className:"h-4 w-4"})}]}];function en(e){let{homeTeam:a,awayTeam:t,league:r}=e,[l,o]=(0,i.useState)("scoring"),[c,d]=(0,i.useState)({}),[m,u]=(0,i.useState)({}),[x,h]=(0,i.useState)({scoring:["goals"],discipline:["yellowCards"],general:["matches"]}),[g,p]=(0,i.useState)("total");(0,i.useEffect)(()=>{let e=async()=>{if(a){let e={};for(let t of el)for(let s of t.stats)e[s.key]=R(a,r,s.key,10);d(e)}if(t){let e={};for(let a of el)for(let s of a.stats)e[s.key]=R(t,r,s.key,10);u(e)}};e()},[a,t,r]);let f=(e,a)=>{h(t=>{let s=t[e]||[];return s.includes(a)?{...t,[e]:s.filter(e=>e!==a)}:{...t,[e]:[...s,a]}})},j=()=>{p(e=>"total"===e?"perMatch":"total")};return(0,s.jsxs)(n.Zb,{className:"p-6 text-white rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Statistiche Giocatori"}),(0,s.jsxs)(C,{value:l,onValueChange:o,children:[(0,s.jsx)(G,{className:"flex mb-6 bg-darkblu-600 rounded-md",children:el.map(e=>(0,s.jsx)(F,{value:e.id,className:"flex-1 py-2 px-4 text-center rounded-md text-sm font-medium ".concat(l===e.id?"bg-gray-700 text-white":"hover:bg-gray-600 text-white-400"),children:e.label},e.id))}),el.map(e=>{var i;return(0,s.jsxs)(I,{value:e.id,className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-wrap gap-4 mb-4",children:e.stats.map(a=>{var t;return(0,s.jsxs)("button",{onClick:()=>f(e.id,a.key),className:"py-2 px-4 flex items-center gap-2 rounded-md text-sm font-medium ".concat((null===(t=x[e.id])||void 0===t?void 0:t.includes(a.key))?"bg-green-500 text-white":"bg-gray-700 text-white-300 hover:bg-gray-600"),children:[a.icon,a.label]},a.key)})}),(0,s.jsxs)("div",{className:"space-y-4",children:[null===(i=x[e.id])||void 0===i?void 0:i.map(i=>{var r,l,n,o;let d=(null===(l=el.find(a=>a.id===e.id))||void 0===l?void 0:null===(r=l.stats.find(e=>e.key===i))||void 0===r?void 0:r.label)||i;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold flex items-center gap-2 text-green-400",children:[null===(o=el.find(a=>a.id===e.id))||void 0===o?void 0:null===(n=o.stats.find(e=>e.key===i))||void 0===n?void 0:n.icon,d]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-sm mr-2",children:"TOT"}),(0,s.jsx)(er,{checked:"perMatch"===g,onCheckedChange:j}),(0,s.jsx)("span",{className:"text-sm ml-2",children:"x90"})]})]}),(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[a&&c[i]&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-md font-medium mb-2",children:a}),(0,s.jsx)(ee,{players:c[i],statLabel:d,displayMode:g})]}),t&&m[i]&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-md font-medium mb-2",children:t}),(0,s.jsx)(ee,{players:m[i],statLabel:d,displayMode:g})]})]})]},i)}),(!x[e.id]||0===x[e.id].length)&&(0,s.jsx)("p",{children:"Nessuna statistica selezionata."})]})]},e.id)})]})]})}let eo=[];async function ec(){try{let e=await fetch("/data/all_leagues_matches.csv"),a=await e.text(),t=await (0,M.b)(a);eo=t.map(e=>({homeTeam:e["Squadra Casa"],awayTeam:e["Squadra Trasferta"],time:e.Orario,date:e.Giorno,competition:e.Campionato,xGHome:parseFloat(e["xG Casa"]),goalsHome:parseInt(e["Gol Casa"]),goalsAway:parseInt(e["Gol Trasferta"]),xGAway:parseFloat(e["xG Trasferta"]),week:parseInt(e["Sett."])}))}catch(e){console.error("Error loading historical matches:",e)}}function ed(e){let a,t,r,{homeTeam:l,awayTeam:o}=e,[c,d]=(0,i.useState)([]),[m,u]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=async()=>{await ec(),u(!1)};e()},[]),(0,i.useEffect)(()=>{if(l&&o){let e=eo.filter(e=>e.homeTeam===l&&e.awayTeam===o||e.homeTeam===o&&e.awayTeam===l).sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime());d(e)}},[l,o]);let x=e=>{let a=c.filter(a=>a.homeTeam===e||a.awayTeam===e).sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()).slice(0,5).map(a=>{if(a.homeTeam===e){if(a.goalsHome>a.goalsAway)return"W";if(a.goalsHome<a.goalsAway)return"L"}else{if(a.goalsAway>a.goalsHome)return"W";if(a.goalsAway<a.goalsHome)return"L"}return"D"});return a},{homeWins:h,awayWins:g,draws:p}=(a=0,t=0,r=0,c.forEach(e=>{e.goalsHome>e.goalsAway?a++:e.goalsAway>e.goalsHome?t++:r++}),{homeWins:a,awayWins:t,draws:r}),j=x(l||""),y=x(o||"");return(0,s.jsxs)(n.Zb,{className:"p-6 text-white rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-left",children:"Precedenti"}),!m&&l&&o&&c.length>0&&(0,s.jsxs)("div",{className:"mb-4 flex justify-center items-center gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(f(),{src:"/images/teams/".concat(l.toLowerCase().replace(/\s+/g,"_"),".png"),alt:l,width:30,height:30,className:"object-contain"}),(0,s.jsx)("span",{className:"text-lg font-bold mt-1",children:h}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Vittorie"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg font-bold text-white",children:p})}),(0,s.jsx)("span",{className:"text-xs text-gray-400 mt-1",children:"Pareggi"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)(f(),{src:"/images/teams/".concat(o.toLowerCase().replace(/\s+/g,"_"),".png"),alt:o,width:30,height:30,className:"object-contain"}),(0,s.jsx)("span",{className:"text-lg font-bold mt-1",children:g}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"Vittorie"})]})]}),!m&&l&&o&&(0,s.jsxs)("div",{className:"flex justify-between mt-2 mb-4",children:[(0,s.jsx)("div",{className:"flex gap-1",children:j.map((e,a)=>(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center rounded-md ".concat("W"===e?"bg-green-500":"L"===e?"bg-red-500":"bg-gray-500"," text-white text-[10px] ").concat(0===a?"border-2 border-yellow-500":""),children:e},a))}),(0,s.jsx)("div",{className:"flex gap-1",children:y.map((e,a)=>(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center rounded-md ".concat("W"===e?"bg-green-500":"L"===e?"bg-red-500":"bg-gray-500"," text-white text-[10px] ").concat(0===a?"border-2 border-yellow-500":""),children:e},a))})]}),m?(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}):l&&o?0===c.length?(0,s.jsxs)("div",{className:"p-6 text-center text-gray-500",children:["Non ci sono precedenti tra ",l," e ",o,"."]}):(0,s.jsx)("div",{className:"space-y-4 overflow-y-auto max-h-[250px]",children:c.map((e,a)=>{let t=e.goalsHome>e.goalsAway,i=e.goalsAway>e.goalsHome;return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-center text-xs text-gray-400 mb-1",children:new Date(e.date).toLocaleDateString()}),(0,s.jsxs)("div",{className:"text-white px-4 py-1 grid grid-cols-3 items-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-right ".concat(t?"text-green-500":"text-white"),style:{maxWidth:"80px",fontSize:"clamp(10px, 1.5vw, 14px)",lineHeight:"1.2",overflowWrap:"break-word",wordWrap:"break-word",whiteSpace:"normal"},children:e.homeTeam}),(0,s.jsx)("div",{className:"relative w-5 h-5 flex-shrink-0",children:(0,s.jsx)(f(),{src:"/images/teams/".concat(e.homeTeam.toLowerCase().replace(/\s+/g,"_"),".png"),alt:e.homeTeam,fill:!0,className:"object-contain"})})]}),(0,s.jsxs)("div",{className:"text-lg font-bold text-center",children:[e.goalsHome," - ",e.goalsAway]}),(0,s.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[(0,s.jsx)("div",{className:"relative w-5 h-5 flex-shrink-0",children:(0,s.jsx)(f(),{src:"/images/teams/".concat(e.awayTeam.toLowerCase().replace(/\s+/g,"_"),".png"),alt:e.awayTeam,fill:!0,className:"object-contain"})}),(0,s.jsx)("span",{className:"font-medium text-left ".concat(i?"text-green-500":"text-white"),style:{maxWidth:"80px",fontSize:"clamp(10px, 1.5vw, 14px)",lineHeight:"1.2",overflowWrap:"break-word",wordWrap:"break-word",whiteSpace:"normal"},children:e.awayTeam})]})]}),a<c.length-1&&(0,s.jsx)("hr",{className:"border-t border-gray-700 my-1"})]},"".concat(e.date,"-").concat(a))})}):(0,s.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,s.jsx)("p",{className:"text-center text-gray-500",children:"Seleziona entrambe le squadre per visualizzare i precedenti."})})]})}function em(){let[e,a]=(0,i.useState)(!0),[t,c]=(0,i.useState)(),[d,m]=(0,i.useState)(),[u,h]=(0,i.useState)();return((0,i.useEffect)(()=>{let e=async()=>{await (0,x.mu)(),await L(),a(!1)};e()},[]),e)?(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Caricamento dati..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(r.w,{}),(0,s.jsx)(l.Y,{}),(0,s.jsx)("main",{className:"lg:pl-60 pt-8",children:(0,s.jsx)("div",{className:"container px-6",children:(0,s.jsxs)("div",{className:"grid gap-8 grid-cols-1 lg:grid-cols-3",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsx)(n.Zb,{className:"overflow-hidden",children:(0,s.jsx)(g,{onMatchSelect:(e,a,t)=>{c(e),m(a),h(t)}})}),(0,s.jsx)(w,{selectedHomeTeam:t,selectedAwayTeam:d,selectedLeague:u,onHomeTeamSelect:e=>{c(e)},onAwayTeamSelect:e=>{m(e)},onLeagueChange:e=>{h(e)}}),t&&d&&u&&(0,s.jsxs)(y.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsx)($,{type:"1",percentage:50,matchCount:10,confidence:"medium"}),(0,s.jsx)($,{type:"X",percentage:30,matchCount:10,confidence:"low"}),(0,s.jsx)($,{type:"2",percentage:20,matchCount:10,confidence:"high"})]}),(0,s.jsx)(o.z,{size:"lg",className:"w-full bg-primary hover:bg-primary/90 transition-colors h-12 text-lg font-medium",children:"Fai una Predizione"}),(0,s.jsx)(Y,{teamHome:t,teamAway:d,league:u}),(0,s.jsx)(en,{homeTeam:t,awayTeam:d,league:u})]})]}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{className:"lg:sticky lg:top-24 space-y-6",children:[(0,s.jsx)(D,{selectedLeague:u,selectedHomeTeam:t,selectedAwayTeam:d}),t&&d&&(0,s.jsx)(ed,{homeTeam:t,awayTeam:d})]})})]})})})]})}},6324:function(e,a,t){"use strict";t.d(a,{g:function(){return o}});var s=t(7437),i=t(2265),r=t(2553),l=t(9311),n=t(7057);function o(e){let{league:a,selectedHomeTeam:t,selectedAwayTeam:o}=e,[c,d]=(0,i.useState)([]),[m,u]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let e=async()=>{try{u(!0),await (0,n.NN)();let e=(0,n.eg)(a);d(e),console.log("Standings for ".concat(a,":"),e)}catch(e){console.error("Errore durante il caricamento della classifica per la lega ".concat(a,":"),e),d([])}finally{u(!1)}};e()},[a]),m)?(0,s.jsx)("p",{className:"text-muted-foreground",children:"Caricamento classifica..."}):c.length?(0,s.jsx)("div",{className:"overflow-hidden rounded-lg border shadow-md",children:(0,s.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:(0,s.jsxs)(r.iA,{className:"table-auto w-full text-muted-foreground",children:[(0,s.jsx)(r.xD,{children:(0,s.jsxs)(r.SC,{children:[(0,s.jsx)(r.ss,{className:"w-[20px] text-center",children:"Pos"}),(0,s.jsx)(r.ss,{className:"w-[40px] text-center",children:"Logo"}),(0,s.jsx)(r.ss,{className:"w-[20px] text-right",children:"Punti"}),(0,s.jsx)(r.ss,{className:"w-[20px] text-right",children:"Giocate"})]})}),(0,s.jsx)(r.RM,{children:c.map(e=>(0,s.jsxs)(r.SC,{className:(0,l.cn)("hover:bg-secondary transition",(e.team===t||e.team===o)&&"bg-primary/10"),children:[(0,s.jsx)(r.pj,{className:"text-center",children:e.position}),(0,s.jsx)(r.pj,{className:"text-center",children:(0,s.jsx)("div",{className:"relative w-7 h-7 mx-auto",children:(0,s.jsx)("img",{src:"/images/teams/".concat(e.team.toLowerCase().replace(/\s+/g,"_"),".png"),alt:e.team,className:"w-full h-full object-cover"})})}),(0,s.jsx)(r.pj,{className:"text-right",children:e.points}),(0,s.jsx)(r.pj,{className:"text-right",children:e.played})]},e.team))})]})})}):(0,s.jsxs)("p",{className:"text-muted-foreground",children:["Nessuna classifica disponibile per ",a]})}},2553:function(e,a,t){"use strict";t.d(a,{RM:function(){return o},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return m},xD:function(){return n}});var s=t(7437),i=t(2265),r=t(9311);let l=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,r.cn)("w-full caption-bottom text-sm",t),...i})})});l.displayName="Table";let n=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("thead",{ref:a,className:(0,r.cn)("[&_tr]:border-b",t),...i})});n.displayName="TableHeader";let o=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,r.cn)("[&_tr:last-child]:border-0",t),...i})});o.displayName="TableBody";let c=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...i})});c.displayName="TableFooter";let d=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("tr",{ref:a,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...i})});d.displayName="TableRow";let m=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("th",{ref:a,className:(0,r.cn)("h-12 px-1 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...i})});m.displayName="TableHead";let u=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("td",{ref:a,className:(0,r.cn)("py-3 px-1 align-middle [&:has([role=checkbox])]:pr-0",t),...i})});u.displayName="TableCell";let x=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,s.jsx)("caption",{ref:a,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",t),...i})});x.displayName="TableCaption"},7817:function(e,a,t){"use strict";t.d(a,{Ds:function(){return x},eg:function(){return u},fw:function(){return o},mu:function(){return m}});var s=t(4746),i=t(1812),r=t.n(i);let l={},n=[],o=[{name:"Serie A",country:"Italia",icon:"/images/leagues/serie_a.png"},{name:"Premier League",country:"Inghilterra",icon:"/images/leagues/premier_league.png"},{name:"La Liga",country:"Spagna",icon:"/images/leagues/la_liga.png"},{name:"Bundesliga",country:"Germania",icon:"/images/leagues/bundesliga.png"},{name:"Ligue 1",country:"Francia",icon:"/images/leagues/ligue_1.png"},{name:"Champions League",country:"Europa",icon:"/images/leagues/champions_league.png"}],c=e=>e.toLowerCase().replace(/\s+/g,"_"),d=e=>e.toLowerCase().replace(/\s+/g,"_");async function m(){try{for(let e of["serie_a","premier_league","la_liga","bundesliga","ligue_1","champions_league"]){let a=await fetch("/data/standings/".concat(e,".csv"));if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let t=await a.text(),i=await (0,s.b)(t);l[e]=i.map(a=>({position:parseInt(a.Pos,10),team:a.Squadra,played:parseInt(a.PG,10),wins:parseInt(a.V,10),draws:parseInt(a.N,10),losses:parseInt(a.P,10),goalsFor:parseInt(a.Rf,10),goalsAgainst:parseInt(a.Rs,10),goalDifference:parseInt(a.DR,10),points:parseInt(a.Pt,10),xG:parseFloat(a.xG),xGA:parseFloat(a.xGA),league:e})),console.log("Classifica caricata per la lega: ".concat(e),l[e])}let e=await fetch("/data/all_leagues_matches.csv");if(!e.ok)throw Error("Failed to load matches: ".concat(e.status));let a=await e.text(),t=r().parse(a,{header:!0,skipEmptyLines:!0});if(t.errors.length>0)throw console.error("Error parsing matches CSV:",t.errors),Error("Error parsing matches CSV.");n=t.data.map(e=>({id:"".concat(e["Squadra Casa"],"-").concat(e["Squadra Trasferta"],"-").concat(e.Giorno,"-").concat(e.Orario),homeTeam:e["Squadra Casa"],awayTeam:e["Squadra Trasferta"],league:e.Campionato,date:e.Giorno,time:e.Orario,xGHome:parseFloat(e["xG Casa"])||0,xGAway:parseFloat(e["xG Trasferta"])||0,golHome:parseInt(e["Gol Casa"])||0,golAway:parseInt(e["Gol Trasferta"])||0})),console.log("Dati caricati con successo.",n)}catch(e){console.error("Error loading data:",e)}}function u(e){let a=c(e);return l[a]||[]}function x(e){let a=d(e),t=Object.entries(l).flatMap(e=>{let[a,t]=e;return t.map(e=>({...e,league:a}))}),s=t.find(e=>d(e.team)===a);if(s)return{team:s.team,league:s.league,players:0,age:0,possession:0,matches:s.played,goals:s.goalsFor,assists:0,goalsAndAssists:s.goalsFor,xG:s.xG,npxG:0,xAG:0,rating:3,logo:"/images/teams/".concat(d(s.team),".png")}}},7057:function(e,a,t){"use strict";t.d(a,{NN:function(){return r},eg:function(){return l}});var s=t(4746);let i={};async function r(){try{for(let e of["serie_a","premier_league","la_liga","bundesliga","ligue_1","champions_league"]){let a=await fetch("/data/standings/".concat(e,".csv")),t=await a.text(),r=await (0,s.b)(t);i[e]=r.map(a=>({position:parseInt(a.Pos,10),team:a.Squadra,played:parseInt(a.PG,10),wins:parseInt(a.V,10),draws:parseInt(a.N,10),losses:parseInt(a.P,10),goalsFor:parseInt(a.Rf,10),goalsAgainst:parseInt(a.Rs,10),goalDifference:parseInt(a.DR,10),points:parseInt(a.Pt,10),xG:parseFloat(a.xG),xGA:parseFloat(a.xGA),league:e})),console.log("Loaded standings for ".concat(e,":"),i[e])}}catch(e){console.error("Error loading standings:",e)}}function l(e){let a=e.toLowerCase().replace(/\s+/g,"_");return console.log("Fetching standings for league: ".concat(a)),i[a]||[]}},4746:function(e,a,t){"use strict";t.d(a,{b:function(){return r}});var s=t(1812),i=t.n(s);async function r(e){return new Promise((a,t)=>{i().parse(e,{header:!0,dynamicTyping:!0,skipEmptyLines:!0,complete:e=>{a(e.data)},error:e=>{t(e)}})})}}},function(e){e.O(0,[51,505,699,779,259,762,479,986,817,549,426,971,864,744],function(){return e(e.s=630)}),_N_E=e.O()}]);